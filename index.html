<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Feliz Aniversario üíñ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Quicksand&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      font-family: 'Quicksand', sans-serif;
      position: relative;
      overflow: hidden;
      background: radial-gradient(circle at 20% 20%, #ffd6e8, transparent 40%),
                  radial-gradient(circle at 80% 30%, #b4e1ff, transparent 40%),
                  radial-gradient(circle at 50% 80%, #d6b4ff, transparent 40%),
                  #ffe6cc;
      background-size: 200% 200%;
      animation: aurora 15s ease infinite;
    }

    @keyframes aurora {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .background-layer {
      position: absolute;
      inset: 0;
      overflow: hidden;
      z-index: 1;
    }

    .container {
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      position: relative;
      z-index: 5;
    }

    /* corazones flotando */
    .floating {
      position: absolute;
      font-size: 24px;
      animation: float 10s linear infinite;
      color: rgba(255, 0, 100, 0.4);
      z-index: 1;
    }
    @keyframes float {
      from { transform: translateY(100vh) scale(1); opacity: 1; }
      to { transform: translateY(-10vh) scale(1.5); opacity: 0; }
    }

    /* fotos */
    .photo {
      position: absolute;
      border-radius: 15px;
      opacity: 0;
      animation: fadePhoto 6s ease-in-out forwards;
      z-index: 2;
      transform: rotate(var(--angle));
    }
    @keyframes fadePhoto {
      0% { opacity: 0; }
      20% { opacity: 1; }   /* aparece suavemente */
      80% { opacity: 1; }   /* se mantiene visible */
      100% { opacity: 0; }  /* desaparece suavemente */
    }

    /* coraz√≥n central */
    .heart {
      width: 160px;
      height: 160px;
      cursor: pointer;
      z-index: 8;
      animation: beat 1.2s infinite;
      filter: drop-shadow(0 0 20px rgba(255, 80, 120, 0.7));
    }
    @keyframes beat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.15); }
    }

    /* carta */
    .card {
      display: none;
      width: 90%;
      max-width: 700px;
      background: white;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(0,0,0,0.3);
      line-height: 1.6;
      position: relative;
      z-index: 10;
      overflow-y: auto;
      max-height: 75vh;
      opacity: 0;
      transform: scale(0.7);
      transition: transform 0.7s ease, opacity 0.7s ease;
      margin: 0 auto;
    }
    .card.show {
      display: block;
      opacity: 1;
      transform: scale(1);
    }
    .card h1 {
      font-family: 'Dancing Script', cursive;
      font-size: 2em;
      margin-bottom: 10px;
      text-align: center;
    }

    /* bot√≥n expandir m√≥vil */
    .toggle-btn {
      display: none;
      position: absolute;
      top: 10px;
      right: 15px;
      background: pink;
      border: none;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      cursor: pointer;
      font-size: 18px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
      z-index: 12;
    }
    .toggle-btn:hover { transform: scale(1.2); }

    /* reproductor */
    .player {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 10px env(safe-area-inset-left) calc(10px + env(safe-area-inset-bottom)) env(safe-area-inset-right);
      background: linear-gradient(to top, rgba(255,255,255,0.8), transparent);
      backdrop-filter: blur(10px);
      display: flex;
      justify-content: center;
      z-index: 9999;
    }
    .player audio {
      width: 90%;
      max-width: 400px;
      border-radius: 40px;
      background: linear-gradient(135deg, #ffafbd, #ffc3a0);
      box-shadow: 0 0 20px rgba(255, 100, 150, 0.6);
      animation: glowPulse 2.5s ease-in-out infinite;
    }
    @keyframes glowPulse {
      0% { box-shadow: 0 0 10px rgba(255, 100, 150, 0.4), 0 0 20px rgba(255, 150, 200, 0.3); }
      50% { box-shadow: 0 0 25px rgba(255, 100, 150, 0.8), 0 0 40px rgba(255, 200, 220, 0.6); }
      100% { box-shadow: 0 0 10px rgba(255, 100, 150, 0.4), 0 0 20px rgba(255, 150, 200, 0.3); }
    }

    /* responsive */
    @media (min-width: 1024px) { 
      .photo { width: 320px; } /* PC */
    }

    @media (max-width: 1023px) and (min-width: 600px) { 
      .photo { width: 220px; } /* Tablet */
    }

    @media (max-width: 599px) {
      .photo { width: 180px; } /* M√≥vil */

      .container {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px 0 90px; /* espacio para reproductor */
      }

      .card {
        width: 90%;
        max-width: 90%;
        margin: 0 auto;
        max-height: 100px;   /* carta cerrada */
        padding: 12px;
        overflow: hidden;
        transition: max-height 0.6s ease, padding 0.3s ease;
        border-radius: 16px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.15);
      }

      .card.expanded {
        max-height: calc(100vh - 160px); /* carta abierta sin chocar con audio */
        overflow-y: auto;
        padding: 20px;
      }

      .card .card-content {
        opacity: 0;
        transform: translateY(-10px);
        transition: opacity 0.4s ease, transform 0.4s ease;
      }

      .card.expanded .card-content {
        opacity: 1;
        transform: translateY(0);
      }

      .toggle-btn { display: block; }
    }
  </style>
</head>
<body>
  <div class="background-layer"></div>

  <div class="container">
    <!-- coraz√≥n -->
    <svg class="heart" id="heart" viewBox="0 0 32 29.6">
      <defs>
        <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#ff99ad;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#ff1a4d;stop-opacity:1" />
        </linearGradient>
      </defs>
      <path d="M23.6,0c-2.9,0-5.4,1.5-6.9,3.8C15.8,1.5,13.3,0,10.4,0
               C4.7,0,0,4.7,0,10.4c0,11.4,16,19.2,16,19.2s16-7.8,16-19.2
               C32,4.7,27.3,0,23.6,0z" fill="url(#grad)" />
    </svg>

    <!-- carta -->
    <div class="card" id="card">
      <button class="toggle-btn" id="toggleBtn">üíñ</button>
      <h1><i>Mi yein</i></h1>
      <div class="card-content">
        <p>Hoy celebramos 4 a√±os juntos, y no puedo evitar sentir un mont√≥n de cosas al mismo tiempo. Cuatro a√±os suenan como mucho tiempo, pero contigo se han sentido como un parpadeo lleno de risas, abrazos y momentos que se volvieron eternos que siempre recuerdo con mucho amor.
A veces me pongo a pensar en c√≥mo empez√≥ todo‚Ä¶ en lo nerviosa que estaba al principio, en esas primeras charlas, en c√≥mo poco a poco fuiste convirti√©ndote en mi persona favorita. Y ahora, mirar hacia atr√°s y ver todo lo que hemos construido juntos me hace sonre√≠r. Hemos crecido, hemos aprendido, hemos cambiado, pero siempre hemos estado ah√≠, uno para el otro. Eso es lo que m√°s valoro: que incluso en los d√≠as dif√≠ciles, seguimos eligi√©ndonos.
Gracias por ser quien eres: por tu paciencia cuando me desespero, por tus abrazos que me arreglan la vida, por tus ocurrencias que me hacen re√≠r aunque no quiera, y por esa forma √∫nica en la que me miras y me haces sentir que estoy en casa. No hay nada m√°s bonito que saber que te tengo a mi lado.
Me encanta que contigo lo simple se vuelve m√°gico. Que una tarde de arrunchis, una pizza, una pel√≠cula o incluso quedarnos en silencio se sienten especiales solo porque estamos juntos. No importa el lugar, no importa el plan, si estoy contigo todo tiene sentido.
En estos 4 a√±os me he dado cuenta de que el amor no es solo lo rom√°ntico, tambi√©n son los detalles peque√±os, las conversaciones largas en la madrugada, las bromas internas, los mensajes inesperados, los apoyos silenciosos, y las veces que nos re√≠mos tanto que nos duele la pansa. Todo eso, amor, es lo que hace que me enamore de ti una y otra vez todos los d√≠as.
Hoy quiero prometerte que voy a seguir cuidando de lo nuestro, que voy a seguir celebrando cada momento contigo, y que siempre voy a estar aqu√≠, en todas las versiones de la vida que nos toquen. Porque si algo tengo claro es que quiero seguir sumando aniversarios contigo, seguir escribiendo nuestra historia y llenando nuestra memoria de momentos felices.
Gracias por ser mi pareja, mi c√≥mplice, mi mejor amigo, mi refugio y mi mayor alegr√≠a. Te amo con todo lo que soy y con todo lo que quiero ser. Por estos 4 a√±os‚Ä¶ y por todos los que vienen ‚ù§Ô∏è‚ú®
</p>
        <p><b>Te amodoro mi amorcito.</b></p>
      </div>
    </div>
  </div>

  <!-- reproductor -->
  <div class="player">
    <audio controls autoplay>
      <source src="medios/Camila_Todo-Cambi√≥[Letra].mp3" type="audio/mpeg">
      Tu navegador no soporta el reproductor de audio.
    </audio>
  </div>

  <script>
    const heart = document.getElementById("heart");
    const card = document.getElementById("card");
    const toggleBtn = document.getElementById("toggleBtn");

    heart.addEventListener("click", () => {
      heart.style.display = "none";
      card.style.display = "block";
      setTimeout(() => { card.classList.add("show"); }, 50);
    });

    toggleBtn.addEventListener("click", () => {
      card.classList.toggle("expanded");
    });

    // fotos en esquinas
    const photos = [
      "medios/1.png","medios/2.png","medios/3.png","medios/4.png","medios/5.png",
      "medios/6.png","medios/7.png","medios/8.png","medios/9.png","medios/10.png",
      "medios/11.png","medios/12.png","medios/13.png"
    ];
    let photoQueue = [];
    function shufflePhotos() { photoQueue = [...photos].sort(() => Math.random() - 0.5); }

    const positions = [
      { side: "right", baseTop: "12vh" },
      { side: "left",  baseTop: "12vh" },
      { side: "right", baseTop: "55vh" },
      { side: "left",  baseTop: "55vh" }
    ];
    let posIndex = 0;

    function getInterval() { return (window.innerWidth <= 599) ? 2000 : 3000; }

    function createPhoto() {
      if (photoQueue.length === 0) shufflePhotos();
      const imgSrc = photoQueue.shift();
      const img = document.createElement("img");
      img.src = imgSrc;
      img.classList.add("photo");
      const pos = positions[posIndex];
      img.style[pos.side] = (2 + (Math.random() * 6 - 3)) + "vw";
      img.style.top = `calc(${pos.baseTop} + ${(Math.random() * 10 - 5)}px)`;
      img.style.setProperty("--angle", (Math.random() * 10 - 5) + "deg");
      document.querySelector(".background-layer").appendChild(img);
      setTimeout(() => { img.remove(); }, 6000);
      posIndex = (posIndex + 1) % positions.length;
    }
    let photoInterval = setInterval(createPhoto, getInterval());
    window.addEventListener("resize", () => {
      clearInterval(photoInterval);
      photoInterval = setInterval(createPhoto, getInterval());
    });

    // corazones flotantes
    function createHeartFloat() {
      const heartEl = document.createElement("div");
      heartEl.classList.add("floating");
      heartEl.innerHTML = "‚ù§";
      heartEl.style.left = Math.random() * 100 + "vw";
      heartEl.style.fontSize = (16 + Math.random() * 20) + "px";
      heartEl.style.animationDuration = (5 + Math.random() * 5) + "s";
      document.querySelector(".background-layer").appendChild(heartEl);
      setTimeout(() => { heartEl.remove(); }, 10000);
    }
    setInterval(createHeartFloat, 400);
  </script>
</body>
</html>
